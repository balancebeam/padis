<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >

<sqlMap namespace="GroupPolicyEndorsement" >

  <typeAlias alias="groupPolicyEndorsementDO" type="com.zhongan.core.group.dao.dataobject.GroupPolicyEndorsementDO" />

  <resultMap id="groupPolicyEndorsementDOResultMap" class="groupPolicyEndorsementDO" >
    <result property="id" column="id" />
    <result property="policyId" column="policy_id" />
    <result property="endorsementNo" column="endorsement_no" />
    <result property="batchNo" column="batch_no" />
    <result property="endorsementType" column="endorsement_type" />
    <result property="targetType" column="target_type" />
    <result property="applicant" column="applicant" />
    <result property="applyDate" column="apply_date" />
    
    <result property="optionPolicyId" column="option_policy_id" />
    <result property="merchantUserId" column="merchant_user_id" />
    <result property="endorsementStatus" column="endorsement_status" />
    <result property="creator" column="creator" />
    <result property="gmtCreated" column="gmt_created" />
    <result property="modifier" column="modifier" />
    <result property="gmtModified" column="gmt_modified" />
    <result property="isDeleted" column="is_deleted" />
    <result property="extraInfo" column="extra_info" />
    <result property="policyHolderName" column="policy_holder_name" />
    <result property="orgCode" column="org_code" />
  </resultMap>
 
  <sql id="groupPolicyEndorsement_columns" >
    a1.id, a1.policy_id, apply_date,a1.endorsement_no, a1.batch_no, a1.endorsement_type, a1.target_type,merchant_user_id,endorsement_status,option_policy_id, 
        a1.applicant, a1.creator, a1.gmt_created, a1.modifier, a1.gmt_modified, 
      a1.is_deleted, a1.extra_info, a1.policy_holder_name, a1.org_code
  </sql>

  <sql id="groupPolicyEndorsement_do_columns" >
    a1.id, a1.policy_id,apply_date ,a1.endorsement_no, a1.batch_no, a1.endorsement_type, a1.target_type, merchant_user_id,endorsement_status, option_policy_id,
       a1.applicant, a1.creator, a1.gmt_created, a1.modifier, a1.gmt_modified, 
      a1.is_deleted, a1.extra_info, a1.policy_holder_name, a1.org_code
  </sql>

  <sql id="queryParams" >
    <dynamic prepend="WHERE" >
      <isNotNull property="id" prepend="AND" >
        <![CDATA[  
        id = #id#  
        ]]>  
      </isNotNull>
      <isNotNull property="policyId" prepend="AND" >
        <![CDATA[  
        policy_id = #policyId#  
        ]]>  
      </isNotNull>
       <isNotNull property="optionPolicyId" prepend="AND" >
        <![CDATA[  
        option_policy_id = #optionPolicyId#  
        ]]>  
      </isNotNull>
      
      <isNotNull property="endorsementNo" prepend="AND" >
        <![CDATA[  
        endorsement_no = #endorsementNo#  
        ]]>  
      </isNotNull>
      <isNotNull property="batchNo" prepend="AND" >
        <![CDATA[  
        batch_no = #batchNo#  
        ]]>  
      </isNotNull>
      <isNotNull property="endorsementType" prepend="AND" >
        <![CDATA[  
        endorsement_type = #endorsementType#  
        ]]>  
      </isNotNull>
      <isNotNull property="targetType" prepend="AND" >
        <![CDATA[  
        target_type = #targetType#  
        ]]>  
      </isNotNull>
 
      <isNotNull property="applicant" prepend="AND" >
        <![CDATA[  
        applicant = #applicant#  
        ]]>  
      </isNotNull>
      <isNotNull property="creator" prepend="AND" >
        <![CDATA[  
        creator = #creator#  
        ]]>  
      </isNotNull>
      <isNotNull property="gmtCreated" prepend="AND" >
        <![CDATA[  
        gmt_created = #gmtCreated#  
        ]]>  
      </isNotNull>
      <isNotNull property="modifier" prepend="AND" >
        <![CDATA[  
        modifier = #modifier#  
        ]]>  
      </isNotNull>
      <isNotNull property="gmtModified" prepend="AND" >
        <![CDATA[  
        gmt_modified = #gmtModified#  
        ]]>  
      </isNotNull>
      <isNotNull property="isDeleted" prepend="AND" >
        <![CDATA[  
        is_deleted = #isDeleted#  
        ]]>  
      </isNotNull>
      <isNotNull property="extraInfo" prepend="AND" >
        <![CDATA[  
        extra_info = #extraInfo#  
        ]]>  
      </isNotNull>
       <isNotNull property="merchantUserId" prepend="AND" >
        <![CDATA[  
        merchant_user_id = #merchantUserId#  
        ]]>  
      </isNotNull>
       <isNotNull property="endorsementStatus" prepend="AND" >
        <![CDATA[  
        endorsement_status = #endorsementStatus#  
        ]]>  
      </isNotNull>
       <isNotNull property="policyHolderName" prepend="AND" >
        <![CDATA[  
        policy_holder_name = #policyHolderName#  
        ]]>  
      </isNotNull>
       <isNotNull property="orgCode" prepend="AND" >
        <![CDATA[  
        org_code = #orgCode#  
        ]]>  
      </isNotNull>
    </dynamic>
  </sql>

  <sql id="doQueryParams" >
    <dynamic prepend="WHERE" >
    	
    <isNotNull property="applyDate" prepend="AND" >
        <![CDATA[  
        apply_date = #applyDate#  
        ]]>  
      </isNotNull>
    	<isNotNull property="optionPolicyId" prepend="AND" >
        <![CDATA[  
        option_policy_id = #optionPolicyId#  
        ]]>  
      </isNotNull>
    	
      <isNotNull property="id" prepend="AND" >
        <![CDATA[  
        id = #id#  
        ]]>  
      </isNotNull>
      <isNotNull property="policyId" prepend="AND" >
        <![CDATA[  
        policy_id = #policyId#  
        ]]>  
      </isNotNull>
      <isNotNull property="endorsementNo" prepend="AND" >
        <![CDATA[  
        endorsement_no = #endorsementNo#  
        ]]>  
      </isNotNull>
      <isNotNull property="batchNo" prepend="AND" >
        <![CDATA[  
        batch_no = #batchNo#  
        ]]>  
      </isNotNull>
      <isNotNull property="endorsementType" prepend="AND" >
        <![CDATA[  
        endorsement_type = #endorsementType#  
        ]]>  
      </isNotNull>
      <isNotNull property="targetType" prepend="AND" >
        <![CDATA[  
        target_type = #targetType#  
        ]]>  
      </isNotNull>
  
      <isNotNull property="applicant" prepend="AND" >
        <![CDATA[  
        applicant = #applicant#  
        ]]>  
      </isNotNull>
      <isNotNull property="creator" prepend="AND" >
        <![CDATA[  
        creator = #creator#  
        ]]>  
      </isNotNull>
      <isNotNull property="gmtCreated" prepend="AND" >
        <![CDATA[  
        gmt_created = #gmtCreated#  
        ]]>  
      </isNotNull>
      <isNotNull property="modifier" prepend="AND" >
        <![CDATA[  
        modifier = #modifier#  
        ]]>  
      </isNotNull>
      <isNotNull property="gmtModified" prepend="AND" >
        <![CDATA[  
        gmt_modified = #gmtModified#  
        ]]>  
      </isNotNull>
      <isNotNull property="isDeleted" prepend="AND" >
        <![CDATA[  
        is_deleted = #isDeleted#  
        ]]>  
      </isNotNull>
      <isNotNull property="extraInfo" prepend="AND" >
        <![CDATA[  
        extra_info = #extraInfo#  
        ]]>  
      </isNotNull>
          <isNotNull property="merchantUserId" prepend="AND" >
        <![CDATA[  
        merchant_user_id = #merchantUserId#  
        ]]>  
      </isNotNull>
       <isNotNull property="endorsementStatus" prepend="AND" >
        <![CDATA[  
        endorsement_status = #endorsementStatus#  
        ]]>  
      </isNotNull>
      <isNotNull property="policyHolderName" prepend="AND" >
        <![CDATA[  
        policy_holder_name = #policyHolderName#  
        ]]>  
      </isNotNull>
       <isNotNull property="orgCode" prepend="AND" >
        <![CDATA[  
        org_code = #orgCode#  
        ]]>  
      </isNotNull>
    </dynamic>
  </sql>
  
  <sql id="dofuzzyQueryParams" >
    <dynamic prepend="WHERE" >
    <isNotNull property="optionPolicyId" prepend="AND" >
        <![CDATA[  
        option_policy_id = #optionPolicyId#  
        ]]>  
      </isNotNull>
    	
      <isNotNull property="id" prepend="AND" >
        <![CDATA[  
        id = #id#  
        ]]>  
      </isNotNull>
      <isNotNull property="policyId" prepend="AND" >
        <![CDATA[  
        policy_id = #policyId#  
        ]]>  
      </isNotNull>
      <isNotNull property="endorsementNo" prepend="AND" >
        <![CDATA[  
        endorsement_no = #endorsementNo#  
        ]]>  
      </isNotNull>
      <isNotNull property="batchNo" prepend="AND" >
        <![CDATA[  
        batch_no = #batchNo#  
        ]]>  
      </isNotNull>
      
      <isNotEmpty property="applyStartDate" prepend="and">
        <![CDATA[  
        apply_date >=#applyStartDate#  
        ]]>
	   </isNotEmpty>
	   <isNotEmpty property="applyEndDate" prepend="and">
        <![CDATA[  
        apply_date <=#applyEndDate#  
        ]]>
	   </isNotEmpty>
      
      <isNotEmpty property="targetType" prepend="AND" >
        <![CDATA[  
        target_type = #targetType#  
        ]]>  
      </isNotEmpty>
  
      <isNotNull property="applicant" prepend="AND" >
        <![CDATA[  
        applicant = #applicant#  
        ]]>  
      </isNotNull>
      <isNotNull property="creator" prepend="AND" >
        <![CDATA[  
        creator = #creator#  
        ]]>  
      </isNotNull>
      <isNotNull property="gmtCreated" prepend="AND" >
        <![CDATA[  
        gmt_created = #gmtCreated#  
        ]]>  
      </isNotNull>
      <isNotNull property="modifier" prepend="AND" >
        <![CDATA[  
        modifier = #modifier#  
        ]]>  
      </isNotNull>
      <isNotNull property="gmtModified" prepend="AND" >
        <![CDATA[  
        gmt_modified = #gmtModified#  
        ]]>  
      </isNotNull>
      <isNotNull property="isDeleted" prepend="AND" >
        <![CDATA[  
        is_deleted = #isDeleted#  
        ]]>  
      </isNotNull>
      <isNotNull property="extraInfo" prepend="AND" >
        <![CDATA[  
        extra_info = #extraInfo#  
        ]]>  
      </isNotNull>
          <isNotNull property="merchantUserId" prepend="AND" >
        <![CDATA[  
        merchant_user_id = #merchantUserId#  
        ]]>  
      </isNotNull>
       <isNotEmpty property="endorsementStatus" prepend="AND" >
        <![CDATA[  
        endorsement_status = #endorsementStatus#  
        ]]>  
      </isNotEmpty>
      <isNotEmpty property="inStatus" prepend="AND" >
	        endorsement_status in 
	         <iterate property="inStatus" conjunction="," open="("
					close=")">
					#inStatus[]#
			 </iterate>
	  </isNotEmpty>
      <isNotEmpty property="endorsementType" prepend="AND" >
        <![CDATA[  
        endorsement_type = #endorsementType#  
        ]]>  
      </isNotEmpty>
      <isNotEmpty property="inEndorsementType" prepend="AND" >
	        endorsement_type in 
	         <iterate property="inEndorsementType" conjunction="," open="("
					close=")">
					#inEndorsementType[]#
			 </iterate>
	  </isNotEmpty>	
      <isNotNull property="policyHolderName" prepend="AND" >
        <![CDATA[  
        policy_holder_name like CONCAT('%',#policyHolderName#, '%')  
        ]]>  
      </isNotNull>
      <isNotNull property="orgCode" prepend="AND" >
        <![CDATA[  
        org_code like CONCAT(#orgCode#, '%')  
        ]]>  
      </isNotNull>
    </dynamic>
  </sql>
  
  <sql id="doQueryMapCondition" >
    <dynamic prepend="WHERE" >
      <isNotNull property="policyId" prepend="AND" >
        <![CDATA[  
        policy_id = #policyId#  
        ]]>  
      </isNotNull>
      <isNotNull property="endorsementNo" prepend="AND" >
        <![CDATA[  
        endorsement_no = #endorsementNo#  
        ]]>  
      </isNotNull>
      <isNotEmpty property="applyStartDate" prepend="and">
        <![CDATA[  
        apply_date >=#applyStartDate#  
        ]]>
	   </isNotEmpty>
	   <isNotEmpty property="applyEndDate" prepend="and">
        <![CDATA[  
        apply_date <=#applyEndDate#  
        ]]>
	   </isNotEmpty>
      <isNotNull property="batchNo" prepend="AND" >
        <![CDATA[  
        batch_no = #batchNo#  
        ]]>  
      </isNotNull>
  	  <isNotEmpty property="endorsementStatus" prepend="AND" >
        <![CDATA[  
        endorsement_status = #endorsementStatus#  
        ]]>  
      </isNotEmpty>
      <isNotEmpty property="inStatus" prepend="AND" >
	        endorsement_status in 
	         <iterate property="inStatus" conjunction="," open="("
					close=")">
					#inStatus[]#
			 </iterate>
	  </isNotEmpty>
      <isNotEmpty property="endorsementType" prepend="AND" >
        <![CDATA[  
        endorsement_type = #endorsementType#  
        ]]>  
      </isNotEmpty>
      <isNotEmpty property="inEndorsementType" prepend="AND" >
	        endorsement_type in 
	         <iterate property="inEndorsementType" conjunction="," open="("
					close=")">
					#inEndorsementType[]#
			 </iterate>
	  </isNotEmpty>	
      <isNotNull property="merchantUserId" prepend="AND" >
        <![CDATA[  
        merchant_user_id = #merchantUserId#  
        ]]>  
      </isNotNull>
      <isNotNull property="isDeleted" prepend="AND" >
        <![CDATA[  
        is_deleted = #isDeleted#  
        ]]>  
      </isNotNull>
      <isNotNull property="policyHolderName" prepend="AND" >
        <![CDATA[  
        policy_holder_name = #policyHolderName#  
        ]]>  
      </isNotNull>
       <isNotNull property="orgCode" prepend="AND" >
        <![CDATA[  
        org_code = #orgCode#  
        ]]>  
      </isNotNull>
    </dynamic>
  </sql>

  <insert id="insert" parameterClass="groupPolicyEndorsementDO" >
    INSERT INTO group_policy_endorsement( id, policy_id,option_policy_id, endorsement_no, batch_no, endorsement_type,endorsement_status ,merchant_user_id,target_type, 
       applicant, creator, gmt_created, modifier, gmt_modified, 
      is_deleted, extra_info,apply_date,policy_holder_name,org_code)
     VALUES ( #id#, #policyId#,#optionPolicyId# , #endorsementNo#, #batchNo#, #endorsementType#,#endorsementStatus# ,#merchantUserId#, #targetType#, 
       #applicant#, #creator#, now(), #modifier#, now(), 
      'N', #extraInfo#,#applyDate#, #policyHolderName#, #orgCode#)
 
  </insert>

     
      

  <update id="update" parameterClass="groupPolicyEndorsementDO" >
    UPDATE group_policy_endorsement   
   set gmt_modified = now()
      
      <!--
      <isNotNull property="id" prepend="," >
        <![CDATA[  
        id = #id#  
        ]]>  
      </isNotNull>
      -->
      <isNotNull property="optionPolicyId" prepend="," >
        <![CDATA[  
        option_policy_id = #optionPolicyId#  
        ]]>  
      </isNotNull>
      
      <isNotNull property="batchNo" prepend="," >
        <![CDATA[  
        batch_no = #batchNo#  
        ]]>  
      </isNotNull>
       
         <isNotNull property="merchantUserId" prepend="," >
        <![CDATA[  
        merchant_user_id = #merchantUserId#  
        ]]>  
      </isNotNull>
       <isNotNull property="endorsementStatus" prepend="," >
        <![CDATA[  
        endorsement_status = #endorsementStatus#  
        ]]>  
      </isNotNull>
      
      
      
      
      <isNotNull property="targetType" prepend="," >
        <![CDATA[  
        target_type = #targetType#  
        ]]>  
      </isNotNull>
 
      <isNotNull property="applicant" prepend="," >
        <![CDATA[  
        applicant = #applicant#  
        ]]>  
      </isNotNull>
     
      <isNotNull property="modifier" prepend="," >
        <![CDATA[  
        modifier = #modifier#  
        ]]>  
      </isNotNull>
      
      <isNotNull property="isDeleted" prepend="," >
        <![CDATA[  
        is_deleted = #isDeleted#  
        ]]>  
      </isNotNull>
      <isNotNull property="extraInfo" prepend="," >
        <![CDATA[  
        extra_info = #extraInfo#  
        ]]>  
      </isNotNull>
      <isNotNull property="policyHolderName" prepend="," >
        <![CDATA[  
        policy_holder_name = #policyHolderName#  
        ]]>  
      </isNotNull>
       <isNotNull property="orgCode" prepend="," >
        <![CDATA[  
        org_code = #orgCode#  
        ]]>  
      </isNotNull>
      
      
     <dynamic prepend="WHERE " >
     <isNotNull property="policyId" prepend="and" >
        <![CDATA[  
        policy_id = #policyId#  
        ]]>  
      </isNotNull>
      <isNotNull property="endorsementNo" prepend="and" >
        <![CDATA[  
        endorsement_no = #endorsementNo#  
        ]]>  
      </isNotNull>
      <isNotNull property="id" prepend="and" >
        <![CDATA[  
        id = #id#  
        ]]>  
      </isNotNull>
      </dynamic>
  </update>

  <select id="findByPrimaryKey" parameterClass="java.lang.Long" resultMap="groupPolicyEndorsementDOResultMap" >
     SELECT 
    <include refid="groupPolicyEndorsement_do_columns" />
    <![CDATA[  
     FROM group_policy_endorsement a1 WHERE id = #id#
    ]]>  
  </select>

  <delete id="deleteByPrimaryKey" parameterClass="java.lang.Long" >
    <![CDATA[  
     DELETE FROM group_policy_endorsement WHERE id = #id#
    ]]>  
  </delete>

  <select id="countByDOExample" parameterClass="groupPolicyEndorsementDO" resultClass="java.lang.Integer" >
    SELECT COUNT(id) AS num FROM group_policy_endorsement 
    <include refid="doQueryParams" />
  </select>

  <select id="findListByDO" resultMap="groupPolicyEndorsementDOResultMap" parameterClass="groupPolicyEndorsementDO" >
     SELECT 
    <include refid="groupPolicyEndorsement_do_columns" />
     FROM group_policy_endorsement a1 
    <include refid="doQueryParams" />
  </select>
  
  <select id="findListByMap" resultMap="groupPolicyEndorsementDOResultMap" parameterClass="java.util.Map" >
     SELECT 
    <include refid="groupPolicyEndorsement_do_columns" />
     FROM group_policy_endorsement a1 
    <include refid="doQueryMapCondition" />
  </select>
  
  <select id="fuzzyQueryListByMap" resultMap="groupPolicyEndorsementDOResultMap" parameterClass="java.util.Map" >
     SELECT 
    <include refid="groupPolicyEndorsement_do_columns" />
     FROM group_policy_endorsement a1 
    <include refid="dofuzzyQueryParams" />
    <isNotNull property="start" >
			   <isNotNull property="limit"  >
				    <![CDATA[ 
       			          limit #start#,#limit#
       		        ]]>
       		     </isNotNull>
	</isNotNull>
  </select>
  
   <select id="countGroupPolicyEndorsement" resultClass="java.lang.Integer" parameterClass="java.util.Map" >
    SELECT COUNT(id) AS num FROM group_policy_endorsement a1
    <include refid="dofuzzyQueryParams" />
  </select>
  
</sqlMap>