<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >

<sqlMap namespace="GroupPolicyPrintRec" >

  <typeAlias alias="groupPolicyPrintRecDO" type="com.zhongan.core.group.dao.dataobject.GroupPolicyPrintRecDO" />

  <resultMap id="groupPolicyPrintRecDOMap" class="groupPolicyPrintRecDO">
    <result property="id" column="id" />
    <result property="policyId" column="policy_id" />
    <result property="policyNo" column="policy_no" />
    <result property="version" column="version" />
    <result property="contentKey" column="content_key" />
    <result property="ossPath" column="oss_path" />
    <result property="status" column="status" />
    <result property="gmtCreated" column="gmt_created" />
    <result property="creator" column="creator" />
    <result property="gmtModified" column="gmt_modified" />
    <result property="modifier" column="modifier" />
    <result property="isDeleted" column="is_deleted" />
  </resultMap>
  
  <sql id="groupPolicyPrintRec_do_columns" >
    	a1.id, a1.policy_id,a1.policy_no, a1.version, a1.content_key, 
      	a1.oss_path, a1.status, a1.gmt_created,a1.creator, a1.gmt_modified, a1.modifier,a1.is_deleted
  </sql>
  
  <sql id="doQueryParams" >
    <dynamic prepend="WHERE" >
      <isNotNull property="id" prepend="AND" >
        <![CDATA[  
        id = #id#  
        ]]>  
      </isNotNull>
      <isNotNull property="policyId" prepend="AND" >
        <![CDATA[  
        policy_id = #policyId#  
        ]]>  
      </isNotNull>
      <isNotNull property="policyNo" prepend="AND" >
        <![CDATA[  
        policy_no = #policyNo#  
        ]]>  
      </isNotNull>
      <isNotNull property="version" prepend="AND" >
        <![CDATA[  
        version = #version#  
        ]]>  
      </isNotNull>
      <isNotNull property="contentKey" prepend="AND" >
        <![CDATA[  
        content_key = #contentKey#  
        ]]>  
      </isNotNull>
      <isNotNull property="ossPath" prepend="AND" >
        <![CDATA[  
        oss_path = #ossPath#  
        ]]>  
      </isNotNull>
      <isNotNull property="status" prepend="AND" >
        <![CDATA[  
        status = #status#  
        ]]>  
      </isNotNull>
      <isNotNull property="gmtCreated" prepend="AND" >
        <![CDATA[  
        gmt_created = #gmtCreated#  
        ]]>  
      </isNotNull>
      <isNotNull property="creator" prepend="AND" >
        <![CDATA[  
        creator = #creator#  
        ]]>  
      </isNotNull>
      <isNotNull property="gmtModified" prepend="AND" >
        <![CDATA[  
        gmt_modified = #gmtModified#  
        ]]>  
      </isNotNull>
      <isNotNull property="modifier" prepend="AND" >
        <![CDATA[  
        modifier = #modifier#  
        ]]>  
      </isNotNull>
      <isNotNull property="isDeleted" prepend="AND" >
        <![CDATA[  
        is_deleted = #isDeleted#  
        ]]>  
      </isNotNull>
    </dynamic>
  </sql>

  <update id="update" parameterClass="groupPolicyPrintRecDO" >
    UPDATE group_policy_print_rec   
    <dynamic prepend="SET" >
      <isNotNull property="policyId" prepend="," >
        <![CDATA[  
        policy_id = #policyId#  
        ]]>  
      </isNotNull>
      <isNotNull property="policyNo" prepend="," >
        <![CDATA[  
        policy_no = #policyNo#  
        ]]>  
      </isNotNull>
      <isNotNull property="version" prepend="," >
        <![CDATA[  
        version = #version#  
        ]]>  
      </isNotNull>
      <isNotNull property="contentKey" prepend="," >
        <![CDATA[  
        content_key = #contentKey#  
        ]]>  
      </isNotNull>
      <isNotNull property="ossPath" prepend="," >
        <![CDATA[  
        oss_path = #ossPath#  
        ]]>  
      </isNotNull>
      <isNotNull property="status" prepend="," >
        <![CDATA[  
        status = #status#  
        ]]>  
      </isNotNull>
      <isNotNull property="gmtCreated" prepend="," >
        <![CDATA[  
        gmt_created = #gmtCreated#  
        ]]>  
      </isNotNull>
      <isNotNull property="creator" prepend="," >
        <![CDATA[  
        creator = #creator#  
        ]]>  
      </isNotNull>
      <isNotNull property="gmtModified" prepend="," >
        <![CDATA[  
        gmt_modified = #gmtModified#  
        ]]>  
      </isNotNull>
      <isNotNull property="modifier" prepend="," >
        <![CDATA[  
        modifier = #modifier#  
        ]]>  
      </isNotNull>
      <isNotNull property="isDeleted" prepend="," >
        <![CDATA[  
        is_deleted = #isDeleted#  
        ]]>  
      </isNotNull>
    </dynamic>
     WHERE id = #id#
  </update>
  
  <insert id="insert" parameterClass="groupPolicyPrintRecDO" >
    INSERT INTO group_policy_print_rec(id, policy_id,policy_no, version, content_key, 
      oss_path, status, gmt_created,creator, gmt_modified, modifier,is_deleted)
     VALUES ( #id#, #policyId#,#policyNo#, #version#, #contentKey#, 
      #ossPath#,#status#, #gmtCreated#,#creator#, #gmtModified#, #modifier#,#isDeleted#)
  </insert>
  
  <select id="selectPolicyId" parameterClass="java.lang.Long" resultMap="groupPolicyPrintRecDOMap" >
     SELECT 
    <include refid="groupPolicyPrintRec_do_columns" />
    <![CDATA[  
     FROM group_policy_print_rec a1 WHERE policy_id = #policyId# AND version = (SELECT MAX(version) FROM group_policy_print_rec WHERE policy_id = #policyId# AND is_deleted='N')
    ]]>  
  </select>
  
  <select id="selectMaxVersionByPolicyId" parameterClass="java.lang.Long" resultClass="java.lang.Long">
     SELECT MAX(version) FROM group_policy_print_rec WHERE policy_id = #policyId#
  </select>
  
  <select id="selectByCondition" parameterClass="java.lang.Long" resultClass="java.lang.Long">
      SELECT 
    <include refid="groupPolicyPrintRec_do_columns" />
    <![CDATA[  
     FROM group_policy_print_rec a1
    ]]> 
    <include refid="doQueryParams" />
  </select>
</sqlMap>